# Семантика типов данных языка RusMatushka

## Поддерживаемые типы данных

### 1. Числовые типы
| Тип                      | Ключевое слово | Описание									  | Примеры				  |
|--------------------------|----------------|--------------------------------------------|-----------------------|
| Число с плавающей точкой | `real`         | 128-битное число с фиксированной точностью  | `3.14`, `-2.5`, `0.0` |
| Целое число              | `integer`      | Целочисленный тип                          | `0`, `25`, `-10`      |

### 2. Строковый тип
| Тип    | Ключевое слово | Описание						  | Примеры									  |
|--------|----------------|-----------------------------------|-------------------------------------------|
| Строка | `string`       | Строка символов в кодировке UTF-8 | `"Hello"`, `""`, `"line\n"`			  |

### 3. Логический тип
| Тип        | Ключевое слово | Описание			| Литералы    |
|------------|----------------|---------------------|-------------|
| Логический | `boolean`     | Логическое значение | `true`, `false` |

### 4. Пустой тип (void)
| Тип    | Ключевое слово | Описание							 | Использование	   |	
|--------|----------------|-----------------------------------|---------------------|
| Пустой | (отсутствует)  | Отсутствие возвращаемого значения | Функции без `: тип` |

## Объявление и инициализация переменных

### Правила инициализации:
1. Переменные должны быть инициализированы перед использованием
2. Тип выражения должен соответствовать объявленному типу переменной
3. Приведение типов запрещено

## Типизация выражений

### Арифметические операции:
| Операция    | Типы операндов   | Тип результата		  |
|-------------|------------------|-------------------------|
| `+ - * / %` | `real`, `real`   | `real`				  |
| `+`         | `string`, `string` | `string` (конкатенация) |

### Операции сравнения:
| Операция			| Типы операндов     | Тип результата |
|-------------------|--------------------|----------------|
| `== != < > <= >=` | `real`, `real`     | `boolean`	  |
| `== != < > <= >=` | `string`, `string` | `boolean`	  |
| `== !=`           | `boolean`, `boolean` | `boolean`	  |

### Логические операции:
| Операция | Типы операндов      | Тип результата |
|----------|---------------------|----------------|
| `@ \|\| !` | `boolean`, `boolean` | `boolean`	  |

## Типы функций

### Функции с возвращаемым значением:
```
	function sum(a: real, b: real) : real
	begin
		return a + b;
	end
```

### Функции без возвращаемого значения (void):
```
	function greet(name: string)
	begin
		write("Hello, ", name);
	end
```

### Правила:
1. Функция без `: тип` имеет пустой тип возврата
2. Пустая функция может использовать `return` без выражения
3. Функция с типом возврата должна возвращать значение через `return выражение`
4. Все ветки выполнения должны возвращать значение совместимого типа

## Семантические правила типов

### 1. Совместимость присваивания
```
	var y : real = 3.14;      
	string s = "hello";
	y = 5.0;                  // Ok
	y = s;                   // Ошибка real != string
```

### 2. Условные выражения
```
	if (x > 0)              // x должен быть числовым типом
	if (ready)              // ready должен быть boolean
```
### 3. Циклы
```
	while (true)            // OK: boolean
	while (x < 10)          // OK: сравнение возвращает boolean
	while (1)               // Ошибка: число вместо boolean
```
### 4. Встроенные функции
```
	abs(-5)                 // Возвращает real
	min(1.00, 2.00, 3.00)   // Все аргументы должны быть одного числового типа
```
### Обработка ошибок типов
	Несоответствие типов при присваивании - ошибка 

	Использование неинициализированной переменной - ошибка

	Неявное приведение типов - ошибка

	Отсутствие возврата в функции с типом - ошибка

	Возврат несовместимого типа - ошибка

### Символы
	поддерживаются в формате utf-8


# Спецификация семантики языка
## Область видимости
- Ограничена блоками кода (`begin...end`)
- Объявленная переменная в области видимости должна использоваться только в этой области видимости и в дочерней области
- после завершения функции, локальная переменная, объявленная в этой области видимости не доступна извне
- Функции захватывают переменные внешней области видимости

## Уникальность имён
- В пределах одной области видимости не должны повторяться имена переменных, в разных - можно
- Переменные и функции используют разные пространства имён
- Можно объявить переменную с именем, совпадающим с именем функции в другой области видимости
- Нельзя скрыть имена встроенных функций и типов данных
- При наличии переменной с тем же именем во внешней области видимости, внутренняя переменная скрывает внешнюю

## Параметры функций
- параметры передаются по значению.
- в объявлении функции при указании параметров указывается их тип.
- Тип и порядок параметров в объявлении функции должны совпадать с вызовом функции
- Нельзя скрыть параметр локальной переменной с тем же именем (ошибка компиляции)
- Параметру можно присвоить новое значение внутри функции
- Фактические параметры вычисляются слева направо перед вызовом функции
- Функция с возвращаемым типом должна заканчиваться оператором return выражение
- Функция без возвращаемого типа может заканчиваться без return или с return;

## Рекурсия
- Внутри исполняемого блока функции может быть вызвана эта же функция
- Поддерживается взаимная рекурсия (две функции могут вызывать друг друга)
- Для взаимной рекурсии функции должны быть объявлены в одной области видимости
- Нет ограничений на глубину рекурсии (ограничено только стеком выполнения)

## Ветвления
- В условиях ветвлений (if) должно использоваться выражение типа boolean
- При истинном условии выполняется блок после then
- При ложном условии выполняется блок после else (если присутствует)
- Нет аналога switch..case
- Все блоки в ветвлениях должны быть явными (begin...end)

## Циклы
### Цикл while
- Выполняется, пока выражение в условии возвращает true
- Условие должно иметь тип boolean
- Выражение условия вычисляется перед каждой итерацией
- Если условие ложно с самого начала, цикл не выполняется ни разу

### Цикл for
- Идентификатор после for создаёт новую переменную в области видимости цикла
- Выражения from и to вычисляются один раз перед началом цикла
- Переменная цикла изменяется от начального значения до конечного включительно
- На каждой итерации проверяется, не превысила ли переменная цикла конечное значение
- Тип переменной цикла и границ должен быть real

#### Операторы управления циклами
break - немедленно завершает выполнение текущего цикла
continue - переходит к следующей итерации текущего цикла
break и continue допустимы только внутри циклов

## Присваивания
- В левой части присваивания может быть только идентификатор переменной
- Нельзя присваивать значения литералам, вызовам функций или выражениям
- Присваивание проверяет совместимость типов во время компиляции
- Тип переменной нельзя изменить после объявления

## Инициализация переменных
- Нельзя обращаться к неинициализированной переменной
- Все переменные должны быть явно инициализированы перед использованием
- Параметры функций считаются инициализированными
- Переменная цикла for инициализируется значением выражения from
